
DROP TABLE CUSTOMER;
DROP TABLE STORE;
DROP TABLE STAFF;
DROP TABLE CATEGORY;
DROP TABLE BRAND;
DROP TABLE ORDER_ITEM;
DROP TABLE PRODUCT;

--CREATE ALL TABLES

CREATE TABLE CUSTOMER(
	CUSTOMER_ID NUMBER(20) NOT NULL,
	CUSTOMER_NAME VARCHAR(30) NOT NULL,
    PHONE NUMBER(20) NOT NULL,
    CITY VARCHAR(30) NOT NULL,
    ZIP_CODE NUMBER(10) NOT NULL,
	PRIMARY KEY (CUSTOMER_ID)
);


CREATE TABLE STORE(
	STORE_ID NUMBER(20) NOT NULL,
	PHONE NUMBER(11) NOT NULL,
	CITY VARCHAR(20) NOT NULL,
	PRIMARY KEY (STORE_ID)
);

CREATE TABLE STAFF(
	STAFF_ID NUMBER(20) NOT NULL,
	STAFF_NAME VARCHAR(30) NOT NULL,
	PHONE NUMBER(11) NOT NULL,
	STORE_ID NUMBER(30) NOT NULL,
	PRIMARY KEY (STAFF_ID)
);


CREATE TABLE CATEGORY(
	CATEGORY_ID NUMBER(20) NOT NULL,
	CATEGORY_NAME VARCHAR(30) NOT NULL,
	PRIMARY KEY (CATEGORY_ID)
);


CREATE TABLE BRAND(
	BRAND_ID NUMBER(30) NOT NULL,
	BRAND_NAME VARCHAR(30) NOT NULL,
	PRIMARY KEY (BRAND_ID)
);

CREATE TABLE PRODUCT(
	PRODUCT_ID NUMBER(30) NOT NULL,
	PRODUCT_NAME VARCHAR(30) NOT NULL,
	BRAND_ID NUMBER(30) NOT NULL,
	CATEGORY_ID NUMBER(20) NOT NULL,
	PRICE NUMBER(30) NOT NULL,
	STOCK NUMBER(20) NOT NULL,
	PRIMARY KEY (PRODUCT_ID),
	FOREIGN KEY (BRAND_ID) REFERENCES BRAND(BRAND_ID),
	FOREIGN KEY (CATEGORY_ID) REFERENCES CATEGORY(CATEGORY_ID)
);


CREATE TABLE ORDER_ITEM(
	ORDER_ID NUMBER(20) NOT NULL,
	PRODUCT_ID NUMBER(30) NOT NULL,
	CUSTOMER_ID NUMBER(20) NOT NULL,
	QUANTITY NUMBER(30),
	TOTAL_PRICE NUMBER(30) NOT NULL,
	PRIMARY KEY (ORDER_ID),
    FOREIGN KEY (PRODUCT_ID) REFERENCES PRODUCT(PRODUCT_ID),
	FOREIGN KEY (CUSTOMER_ID) REFERENCES CUSTOMER(CUSTOMER_ID)
);

	STORE_ID NUMBER(30) NOT NULL,
	STAFF_ID NUMBER(20) NOT NULL,
    FOREIGN KEY (STORE_ID) REFERENCES STORE(STORE_ID),
    FOREIGN KEY (STAFF_ID) REFERENCES STAFF(STAFF_ID)


DESCRIBE CUSTOMER;
DESCRIBE STORE;
DESCRIBE STAFF;
DESCRIBE CATEGORY;
DESCRIBE BRAND;
DESCRIBE PRODUCT;
DESCRIBE ORDER_ITEM;

--INSERT OPERATION


INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5001, 'Joe', 8956, 'Dhaka', 898);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5002, 'Mona', 9853,'Dhaka', 345);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5003, 'Shin', 9754,'Dhaka', 666);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5004, 'Polok', 0953, 'Dhaka', 435);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5005, 'Kyla', 9747,'Dhaka', 543);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5006, 'Lubna', 2356, 'Dhaka', 764);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5007, 'Michelle', 6461, 'Khulna', 543);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5008, 'Oronno', 7622, 'Khulna', 689);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5009, 'Julio', 8765, 'Khulna', 245);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5010, 'Himu', 7643, 'Khulna', 234);
INSERT INTO CUSTOMER(CUSTOMER_ID, CUSTOMER_NAME, PHONE, CITY, ZIP_CODE) VALUES (5011, 'Nishi', 9833, 'Khulna', 776);


INSERT INTO STORE(STORE_ID, PHONE, CITY) VALUES (701, 01892, 'DHAKA');
INSERT INTO STORE(STORE_ID, PHONE, CITY) VALUES (702, 37492, 'RAJSHAHI');
INSERT INTO STORE(STORE_ID, PHONE, CITY) VALUES (703, 33345, 'KHULNA');


INSERT INTO STAFF(STAFF_ID, STAFF_NAME, PHONE, STORE_ID) VALUES ( 301, 'RAAD', 041, 703);
INSERT INTO STAFF(STAFF_ID, STAFF_NAME, PHONE, STORE_ID) VALUES ( 302, 'FUAD', 017, 701);
INSERT INTO STAFF(STAFF_ID, STAFF_NAME, PHONE, STORE_ID) VALUES ( 303, 'SADI', 037, 702);
INSERT INTO STAFF(STAFF_ID, STAFF_NAME, PHONE, STORE_ID) VALUES ( 304, 'SHUPTO', 006, 702);
INSERT INTO STAFF(STAFF_ID, STAFF_NAME, PHONE, STORE_ID) VALUES ( 305, 'ALVI', 013, 701);
INSERT INTO STAFF(STAFF_ID, STAFF_NAME, PHONE, STORE_ID) VALUES ( 306, 'ROBINS', 047, 703);


INSERT INTO CATEGORY(CATEGORY_ID, CATEGORY_NAME) VALUES (201, 'HEALTH');
INSERT INTO CATEGORY(CATEGORY_ID, CATEGORY_NAME) VALUES (202, 'FOOD');
INSERT INTO CATEGORY(CATEGORY_ID, CATEGORY_NAME) VALUES (203, 'HOUSEHOLD');
INSERT INTO CATEGORY(CATEGORY_ID, CATEGORY_NAME) VALUES (204, 'STATIONARY');


INSERT INTO BRAND(BRAND_ID, BRAND_NAME) VALUES ( 801, 'LOREAL');
INSERT INTO BRAND(BRAND_ID, BRAND_NAME) VALUES ( 802, 'GARNIER');
INSERT INTO BRAND(BRAND_ID, BRAND_NAME) VALUES ( 803, 'AARONG');
INSERT INTO BRAND(BRAND_ID, BRAND_NAME) VALUES ( 804, 'SARA');
INSERT INTO BRAND(BRAND_ID, BRAND_NAME) VALUES ( 805, 'OLAY');
INSERT INTO BRAND(BRAND_ID, BRAND_NAME) VALUES ( 806, 'COSRX');


INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 101, 'SOAP', 802, 201, 700, 40);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 102, 'RICE', 804, 202, 900, 50);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 103, 'PEN', 806, 204, 300, 40);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 104, 'SAVLON', 801, 201, 200, 50);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 105, 'SHAMPOO', 805, 201, 400, 80);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 106, 'BROOM', 803, 203, 100, 90);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 107, 'HARPIC', 801, 201, 500, 20);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 108, 'PAPER', 802, 204, 460, 40);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 109, 'ACRYLIC', 804, 204, 500, 60);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 110, 'RAMEN', 805, 202, 750, 90);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 111, 'COKE', 806, 202, 250, 39);
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 112, 'TOOTHPASTE', 803, 201, 350, 45);


INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (670, 101, 5001, 1, 700);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (671, 102, 5002, 2, 1800);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (672, 103, 5003, 3, 900);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (673, 104, 5004, 1, 200);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (674, 105, 5005, 11, 4400);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (675, 106, 5006, 12, 1200);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (676, 107, 5007, 5, 2500);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (677, 103, 5008, 2, 600);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (678, 105, 5009, 3, 1200);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (679, 101, 5001, 5, 3500);
INSERT INTO ORDER_ITEM(ORDER_ID, PRODUCT_ID, CUSTOMER_ID, QUANTITY, TOTAL_PRICE) VALUES (680, 106, 5009, 7, 700);


SELECT * FROM CUSTOMER;
SELECT * FROM STORE;
SELECT * FROM STAFF;
SELECT * FROM CATEGORY;
SELECT * FROM BRAND;
SELECT * FROM PRODUCT;
SELECT * FROM ORDER_ITEM;

---DDL---
ALTER TABLE CUSTOMER ADD AGE NUMBER(20);
ALTER TABLE CUSTOMER MODIFY AGE NUMBER(15);
SELECT * FROM CUSTOMER;
ALTER TABLE CUSTOMER DROP COLUMN AGE;
SELECT * FROM CUSTOMER;
ALTER TABLE STAFF RENAME COLUMN PHONE TO MOBILE;
SELECT * FROM STAFF;

---DML---
--DELETE-
INSERT INTO PRODUCT(PRODUCT_ID, PRODUCT_NAME, BRAND_ID, CATEGORY_ID, PRICE, STOCK) VALUES ( 113, 'BRUSH', 803, 201, 350, 0);
DELETE FROM PRODUCT WHERE STOCK=0;

--UPDATE
UPDATE STORE SET CITY='CHATTOGRAM' WHERE STORE_ID=703;

--AGGREGATE FUNCTION
SELECT COUNT(*) FROM PRODUCT;
SELECT COUNT(PRODUCT_NAME) AS NUMBER_OF_PRODUCT FROM PRODUCT;
SELECT COUNT(DISTINCT PRODUCT_NAME) AS NUMBER_OF_PRODUCT FROM PRODUCT;
  --AVG, TOTAL, MIN, MAX
select avg(PRICE) from PRODUCT;
select sum(TOTAL_PRICE) from ORDER_ITEM;
SELECT MAX(TOTAL_PRICE) FROM ORDER_ITEM;
SELECT MIN(TOTAL_PRICE) FROM ORDER_ITEM;


SELECT PRODUCT_NAME, PRICE FROM PRODUCT WHERE CATEGORY_ID=203;
--UNION
SELECT PRODUCT_NAME FROM PRODUCT WHERE PRODUCT_NAME LIKE 'S%';


--NESTED SUBQUERY
SELECT PRODUCT_NAME, PRICE, STOCK FROM PRODUCT WHERE PRODUCT_ID=(SELECT PRODUCT_ID FROM ORDER_ITEM WHERE ORDER_ID=675);

--SOME OPERATION

SELECT * FROM ORDER_ITEM WHERE TOTAL_PRICE> SOME(SELECT TOTAL_PRICE FROM ORDER_ITEM WHERE TOTAL_PRICE>=1000);


--STRING OPERATION
SELECT * FROM CUSTOMER WHERE CUSTOMER_NAME LIKE '___';
SELECT * FROM CUSTOMER WHERE ZIP_CODE LIKE '8%%';

--JOIN
SELECT * FROM PRODUCT NATURAL JOIN BRAND WHERE BRAND_ID=803;
SELECT O.PRODUCT_ID, O.QUANTITY, O.TOTAL_PRICE, C.CUSTOMER_NAME, C.CITY FROM ORDER_ITEM O LEFT OUTER JOIN CUSTOMER C USING(CUSTOMER_ID);
SELECT O.PRODUCT_ID, O.QUANTITY, O.TOTAL_PRICE, C.CUSTOMER_NAME, C.CITY FROM ORDER_ITEM O RIGHT OUTER JOIN CUSTOMER C USING(CUSTOMER_ID);


--VIEW
CREATE VIEW CUSTOMER_INFRO AS SELECT CUSTOMER_NAME, CITY FROM CUSTOMER;
